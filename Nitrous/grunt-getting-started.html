<h1 id="getting-started-with-grunt">Getting Started with Grunt</h1>
<div class="figure">
<img src="https://cdn.tutsplus.com/wp/uploads/2014/01/grunt-logo-400.png" alt="Grunt Logo" />
<p class="caption">Grunt Logo</p>
</div>
<div class=”table-of-contents”>
<h3>
Table of Contents
</h3>
<ul>
<pre><code>&lt;li&gt;&lt;a href=”#Prerequisites”&gt; Prerequisites &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#what-does-grunt-do”&gt; What Does Grunt Do?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#1”&gt; 1 - Create a Node.js Container&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#2”&gt; 2 - Installing Base Grunt Packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#3”&gt; 3 - Initialising a Project&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#4”&gt; 4 - Installing Grunt &amp; Default Plugins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#5”&gt; 5 - Configuring the Gruntfile&lt;/a&gt;&lt;/li&gt;
&lt;ul&gt;
    &lt;li&gt;&lt;a href=”#grunt-contrib-concat”&gt; grunt-contrib-concat&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=”#grunt-contrib-uglify”&gt;grunt-contrib-uglify&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=”#grunt-contrib-jshint”&gt;grunt-contrib-jshint&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=”#grunt-contrib-qunit”&gt;grunt-contrib-qunit&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=”#grunt-contrib-watch”&gt;grunt-contrib-watch&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;    
&lt;li&gt;&lt;a href=”#6”&gt; 6 - Enabling &amp; Running Grunt Tasks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=”#conclusion”&gt; Conclusion&lt;/a&gt;&lt;/li&gt;</code></pre>
</ul>
<h2 id="”Prerequisites”">
Prerequisites
</h2>
<ul class="”prerequisites”">
<pre><code> &lt;li&gt;An understanding of how &lt;a href=&quot;https://git-scm.com/&quot;&gt;Git version control&lt;/a&gt; works is helpful but not essential to this tutorial.
 &lt;/li&gt;</code></pre>
</ul>
<h2 id="”what-does-grunt-do”">
What Does Grunt Do?
</h2>
<p>Surprisingly sometimes a lot more work goes into maintaining web applications than it does actually creating them. This can generate a substantial amount of extra workload for those running the service, website, or online platform.</p>
<p>Thankfully though there are web app automation tools out there to help with this. Often they are referred to as <em>task runners</em>, and their job is to to help complete routine work activities such as minification, compilation, unit testing, linting, and any most repetitive tasks.</p>
<p>&quot;Grunt&quot; is a JavaScript focused task runner, and exists to remove the mundane side of web app maintenance with minimal effort on the maintainers part. It also has a wide variety of plugins on offer, so you can automate almost anything and everything with relative ease.</p>
<p>In this tutorial we cover the fundamentals of how to install, setup, and make use of Grunt in an example web project.</p>
<h2 id="”1”">
1 - Create a Node.js Container
</h2>
<p>Start off by creating a new container from within a pre-existing workspace. This is found at the top right of the screen inside the <code>+</code> symbol drop-down menu.</p>
<p>The template you'll want to use is listed as &quot;Node.js&quot;.</p>
<div class="figure">
<img src="https://nitrous-community.s3.amazonaws.com/images/nodejs-template.png" alt="Node.js Container Image" />
<p class="caption">Node.js Container Image</p>
</div>
<p>This container template is ideal for using Grunt and gives us access to Node Package Manager, plus some of the other background tools we may need.</p>
<p>Update these tools and packages to their latest versions using:</p>
<pre class="command"><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade </code></pre>
<p>Enter <code>y</code> for any prompts and wait whilst the updates are downloaded then installed to the container.</p>
<h2 id="”2”">
2 - Installing Base Grunt Packages
</h2>
<p>Grunt is split into multiple components by design. The core package we need from the onset is the CLI package. Which adds the <code>grunt</code> command to your <em>system path</em> and allow us to run it from anywhere in the container's file-system.</p>
<p>Install it with Node Package Manager onto your container:</p>
<pre class="command"><code>npm install -g grunt-cli</code></pre>
<p>The only other package you need to install for now is the initialisation package, with:</p>
<pre class="command"><code>npm install -g grunt-init</code></pre>
<p>There are some more packages to install later on once we get into adding the actual Grunt program and plugins.</p>
<h2 id="”3”">
3 - Initialising a Project
</h2>
<p>Most projects are run and developed using some form of version control, our example project is no different.</p>
<p>Clone this <strong>example</strong> web project into your Nitrous container:</p>
<pre class="command"><code>git clone https://github.com/madhums/node-express-mongoose-demo.git</code></pre>
<p>We're going to be using the demo project to demonstrate setting up and running Grunt.</p>
<p>Let's change into the project so it's the current working directory:</p>
<pre class="command"><code>cd node-express-mongoose-demo/</code></pre>
<p>Run this next command to have <code>npm</code> install all our demo projects dependencies into the container for us. It will take a few minutes to complete.</p>
<pre class="command"><code>npm install</code></pre>
<p>Grunts main configuration is handled by two files, one named <code>package.json</code> and another named <code>Gruntfile.js</code> .</p>
<p>Proceed by cloning the official Grunt template repository, so we can generate one of these two files:</p>
<pre class="command"><code>git clone https://github.com/gruntjs/grunt-init-gruntfile.git ~/.grunt-init/gruntfile</code></pre>
<p>Run the template through the <code>grunt-init</code> package from earlier:</p>
<pre class="command"><code>grunt-init gruntfile</code></pre>
<p>A series of prompts containing questions will be displayed.</p>
<p>Answer the questions with the corresponding letters found in the below output:</p>
<pre><code>[?] Is the DOM involved in ANY way? (Y/n) Y
[?] Will files be concatenated or minified? (Y/n) Y
[?] Will you have a package.json file? (Y/n) N
[?] Do you need to make any changes to the above before continuing? (y/N) N</code></pre>
<p>It's important <strong>not</strong> to generate a new <code>package.json</code> file here as we already have one in our demo project, and don't want to overwrite its contents.</p>
<p>The correct output you should see is as follows:</p>
<pre><code>Writing Gruntfile.js...OK
Initialized from template &quot;gruntfile&quot;.
Done, without errors.</code></pre>
<p>We are now ready to install Grunt itself and the initial plugins.</p>
<h2 id="”4”">
4 - Installing Grunt &amp; Default Plugins
</h2>
<p>The <code>package.json</code> file holds all the metadata related to our project. In regards to Grunt, it lists all the plugins and dependencies required to run tasks successfully.</p>
<p>Installing and scheduling tasks with Grunt is intended to be easy and intuitive. This is achieved through using <em>plugin</em> packages that we must install and configure.</p>
<p>Install Grunt and the core plugins using:</p>
<pre class="command"><code>npm install grunt grunt-contrib-jshint grunt-contrib-watch grunt-contrib-qunit grunt-contrib-concat grunt-contrib-uglify --save-dev</code></pre>
<p>This brings in <code>grunt</code> itself and attributes the plugins as dependencies inside the <code>package.json</code> file. vim</p>
<p>Navigate to the <code>package.json</code> file in your Nitrous IDE to see it's contents.</p>
<p>Scrolling down towards the bottom of the file will show Grunt and the plugins as new dependencies:</p>
<div class="figure">
<img src="http://i.imgur.com/0lmEAce.png" alt="Nitrous IDE - package.json Image" />
<p class="caption">Nitrous IDE - package.json Image</p>
</div>
<p>Move on to examine the Gruntfile we generated earlier.</p>
<h2 id="”5”">
5 - Configuring the Gruntfile
</h2>
<p><code>Gruntfile.js</code> or just <em>&quot;the Gruntfile&quot;</em> is where we configure the plugins and tasks we want to run through Grunt.</p>
<p>Navigate to <code>Gruntfile.js</code> in your Nitrous IDE and check out the code.</p>
<div class="figure">
<img src="http://i.imgur.com/dcqomne.png" alt="Nitrous IDE - Gruntfile.js Image" />
<p class="caption">Nitrous IDE - Gruntfile.js Image</p>
</div>
<p>First incorporate the new code below to the <code>// Project configuration.</code> section, so the Gruntfile looks like this:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">   <span class="co">/*global module:false*/</span>
  <span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="kw">function</span>(grunt) <span class="op">{</span>

  <span class="co">// Project configuration.</span>
  <span class="va">grunt</span>.<span class="at">initConfig</span>(<span class="op">{</span>
    <span class="dt">jsDir</span><span class="op">:</span> <span class="st">&#39;public/js/&#39;</span><span class="op">,</span>
    <span class="dt">jsDistDir</span><span class="op">:</span> <span class="st">&#39;dist/js/&#39;</span><span class="op">,</span>
    <span class="dt">cssDir</span><span class="op">:</span> <span class="st">&#39;public/css/&#39;</span><span class="op">,</span>
    <span class="dt">cssDistDir</span><span class="op">:</span> <span class="st">&#39;dist/css/&#39;</span><span class="op">,</span>
    <span class="dt">pkg</span><span class="op">:</span> <span class="va">grunt</span>.<span class="va">file</span>.<span class="at">readJSON</span>(<span class="st">&#39;package.json&#39;</span>)<span class="op">,</span></code></pre></div>
<h3 id="”grunt-contrib-concat”">
grunt-contrib-concat
</h3>
<p>If we continue and narrow down the code in here to the sections that are relevant to our plugins, we can see they begin at the comment that reads: <code>// Task configuration.</code></p>
<div class="figure">
<img src="http://i.imgur.com/o5dTmQm.png" alt="Nitrous IDE - Gruntfile.js Image" />
<p class="caption">Nitrous IDE - Gruntfile.js Image</p>
</div>
<p>Below the comment we find a <code>concat</code> code block.</p>
<p>This contains the task settings and configuration options for the <code>grunt-contrib-concat</code> plugin. Which groups together (or concatenates) all the JavaScript file contents in the <code>src:</code> path, and then outputs the results into the location defined on the <code>dest:</code> line.</p>
<p>Adapt the code for this plugin so it now contains:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">     <span class="co">// Task configuration.</span>
     concat<span class="op">:</span> <span class="op">{</span>
      <span class="dt">js</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">options</span><span class="op">:</span> <span class="op">{</span>
          <span class="dt">separator</span><span class="op">:</span> <span class="st">&#39;;&#39;</span>
          <span class="op">},</span>
        <span class="dt">src</span><span class="op">:</span> [<span class="st">&#39;&lt;%=jsDir%&gt;*.js&#39;</span>]<span class="op">,</span>
        <span class="dt">dest</span><span class="op">:</span> <span class="st">&#39;&lt;%=jsDistDir%&gt;&lt;%= pkg.name %&gt;.js&#39;</span>
      <span class="op">},</span>
      <span class="dt">css</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">src</span><span class="op">:</span> [<span class="st">&#39;&lt;%=cssDir%&gt;*.css&#39;</span>]<span class="op">,</span>
        <span class="dt">dest</span><span class="op">:</span> <span class="st">&#39;&lt;%=cssDistDir%&gt;&lt;%= pkg.name %&gt;.css&#39;</span>
      <span class="op">}</span>
    <span class="op">},</span></code></pre></div>
<h3 id="”grunt-contrib-uglify”">
grunt-contrib-uglify
</h3>
<p>Further down is another code block containing the settings for the <code>grunt-contrib-uglify</code> plugin. This takes the results of the JS <em>concat</em> task and then <em>minifies</em> it.</p>
<p>Alter this code to instead contain:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">  uglify<span class="op">:</span> <span class="op">{</span>
      <span class="dt">options</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">banner</span><span class="op">:</span> <span class="st">&#39;/*! &lt;%= pkg.name %&gt; &lt;%=grunt.template.today(&quot;dd-mm-yyyy&quot;) %&gt; */</span><span class="sc">\n</span><span class="st">&#39;</span>
      <span class="op">},</span>
      <span class="dt">dist</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">files</span><span class="op">:</span> <span class="op">{</span>
          <span class="st">&#39;&lt;%=jsDistDir%&gt;&lt;%= pkg.name %&gt;.min.js&#39;</span><span class="op">:</span> [<span class="st">&#39;&lt;%= concat.js.dest %&gt;&#39;</span>]
        <span class="op">}</span>
      <span class="op">}</span>
    <span class="op">},</span></code></pre></div>
<h3 id="”grunt-contrib-jshint”">
grunt-contrib-jshint
</h3>
<p>Next are the options for the <code>grunt-contrib-jshint</code> plugin. This task lists any errors, potential problems, and issues in the JavaScript coding of files in the <code>:src</code> directories. There is no need to change anything for this plugin's code.</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">    jshint<span class="op">:</span> <span class="op">{</span>
      <span class="dt">options</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">curly</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">eqeqeq</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">immed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">latedef</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">newcap</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">noarg</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">sub</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">undef</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">unused</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">boss</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">eqnull</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">browser</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>
        <span class="dt">globals</span><span class="op">:</span> <span class="op">{}</span>
      <span class="op">},</span>
      <span class="dt">gruntfile</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">src</span><span class="op">:</span> <span class="st">&#39;Gruntfile.js&#39;</span>
      <span class="op">},</span>
      <span class="dt">lib_test</span><span class="op">:</span> <span class="op">{</span>
        <span class="dt">src</span><span class="op">:</span> [<span class="st">&#39;lib/**/*.js&#39;</span><span class="op">,</span> <span class="st">&#39;test/**/*.js&#39;</span>]
      <span class="op">}</span>
    <span class="op">},</span></code></pre></div>
<h3 id="”grunt-contrib-qunit”">
grunt-contrib-qunit
</h3>
<p><code>grunt-contrib-qunit</code> used to carries out <em>unit tests</em> with <a href="http://phantomjs.org/">Phantom JS</a>. This current config tests all <code>.html</code> files in the <code>test</code> directory and subdirectories. We are not going to test out or use it in this tutorial however.</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">    qunit<span class="op">:</span> <span class="op">{</span>
      <span class="dt">files</span><span class="op">:</span> [<span class="st">&#39;test/**/*.html&#39;</span>]
    <span class="op">},</span></code></pre></div>
<h3 id="”grunt-contrib-watch”">
grunt-contrib-watch
</h3>
<p>The <code>watch</code> task is run constantly in the background and monitors file changes. If any of &quot;changes&quot; affect our selected tasks in any way, it will re-run the tasks to update their results with the changes.</p>
<p>Here is what you need to add and change for our example project:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"> watch<span class="op">:</span> <span class="op">{</span>
       <span class="dt">files</span><span class="op">:</span> [<span class="st">&#39;&lt;%=jsDir%&gt;*.js&#39;</span><span class="op">,</span> <span class="st">&#39;&lt;%=cssDir%&gt;*.css&#39;</span>]<span class="op">,</span>
       <span class="dt">tasks</span><span class="op">:</span> [<span class="st">&#39;concat&#39;</span><span class="op">,</span> <span class="st">&#39;uglify&#39;</span>]
      <span class="op">},</span>              
      gruntfile<span class="op">:</span> <span class="op">{</span>
        <span class="dt">files</span><span class="op">:</span> <span class="st">&#39;&lt;%= jshint.gruntfile.src %&gt;&#39;</span><span class="op">,</span>
        <span class="dt">tasks</span><span class="op">:</span> [<span class="st">&#39;jshint:gruntfile&#39;</span>]
      <span class="op">},</span>
      lib_test<span class="op">:</span> <span class="op">{</span>
        <span class="dt">files</span><span class="op">:</span> <span class="st">&#39;&lt;%= jshint.lib_test.src %&gt;&#39;</span><span class="op">,</span>
        <span class="dt">tasks</span><span class="op">:</span> [<span class="st">&#39;jshint:lib_test&#39;</span><span class="op">,</span> <span class="st">&#39;qunit&#39;</span>]
      <span class="op">}</span>
  })<span class="op">;</span></code></pre></div>
<blockquote>
<p><code>Gruntfile.js</code> should be committed and tracked by version control, so others can easily clone and setup the project as and when needed.</p>
</blockquote>
<p><strong>Save</strong> your changes to the Gruntfile before moving on with <code>CTRL</code> + <code>S</code> or via the &quot;File&quot; drop down menu.</p>
<h2 id="”6”">
6 - Enabling &amp; Running Grunt Tasks
</h2>
<p>From looking at the Gruntfile we can see the tasks are configured and ready to run, but the plugins themselves still need to be enabled.</p>
<p>Scroll even further down and you'll see where these task plugins are enabled.</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">  <span class="co">// These plugins provide necessary tasks.</span>
  <span class="va">grunt</span>.<span class="at">loadNpmTasks</span>(<span class="st">&#39;grunt-contrib-concat&#39;</span>)<span class="op">;</span>
  <span class="va">grunt</span>.<span class="at">loadNpmTasks</span>(<span class="st">&#39;grunt-contrib-uglify&#39;</span>)<span class="op">;</span>
  <span class="va">grunt</span>.<span class="at">loadNpmTasks</span>(<span class="st">&#39;grunt-contrib-qunit&#39;</span>)<span class="op">;</span>
  <span class="va">grunt</span>.<span class="at">loadNpmTasks</span>(<span class="st">&#39;grunt-contrib-jshint&#39;</span>)<span class="op">;</span>
  <span class="va">grunt</span>.<span class="at">loadNpmTasks</span>(<span class="st">&#39;grunt-contrib-watch&#39;</span>)<span class="op">;</span></code></pre></div>
<p>From here onwards configured and enabled plugins are added as &quot;default tasks&quot;. Add the <code>watch</code> task at the end, and remove <code>'jshint'</code> plus <code>'qunit'</code> so your line now looks like this:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">  <span class="co">// Default task.</span>
  <span class="va">grunt</span>.<span class="at">registerTask</span>(<span class="st">&#39;default&#39;</span><span class="op">,</span> [<span class="st">&#39;concat&#39;</span><span class="op">,</span> <span class="st">&#39;uglify&#39;</span>])<span class="op">;</span></code></pre></div>
<p>Back on the command line outside of the Gruntfile. These default tasks are now triggered and run by calling <code>grunt</code> as a program.</p>
<p>Run it with:</p>
<pre class="command"><code>grunt</code></pre>
<p>A successful output reads:</p>
<pre><code>Running &quot;concat:js&quot; (concat) task
File dist/js/nodejs-express-mongoose-demo.js created.
Running &quot;concat:css&quot; (concat) task
File dist/css/nodejs-express-mongoose-demo.css created.
Running &quot;uglify:dist&quot; (uglify) task
&gt;&gt; 1 file created.
Done, without errors.</code></pre>
<p>Inside of the <code>dist/css</code> and <code>dist/js</code> directories there are now the concatenated and <em>minified</em> files!</p>
<div class="figure">
<img src="http://i.imgur.com/TF9Dqxm.png" alt="Concatenated CSS" />
<p class="caption">Concatenated CSS</p>
</div>
<p>Alternatively the tasks that weren't added as a default task are run when passed as parameters to Grunt.</p>
<p>For example:</p>
<pre class="command"><code>grunt watch &amp;</code></pre>
<p><code>watch</code> now re-runs the selected tasks again if necessary.</p>
<p>Further plugins to add to your Grunt setup can be searched for on the official Grunt website:</p>
<p>http://gruntjs.com/plugins</p>
<h2 id="”conclusion”">
Conclusion
</h2>
<p>Grunt works even better when it's used with similar like-minded tools. This helps establish an efficient workflow for manipulating assets and resources within your app’s codebase.</p>
<p>If you’d like to learn about more complex and powerful front-end development tools, check out <a href="https://community.nitrous.io/tutorials/setting-up-gulp-with-livereload-sass-and-other-tasks">Gulp</a>, <a href="https://community.nitrous.io/tutorials/getting-started-with-bower">Bower</a>, &amp; <a href="http://yeoman.io/">Yeoman</a>.</p>
<p>You can also check out Grunt's documentation on creating plugins; if you can't find an official plugin that meets your project's needs:</p>
<p>http://gruntjs.com/creating-plugins</p>
